---
- name: install nodejs
  hosts: all
  become: yes
  tasks:
    - name: Install Node package manager and Nodejs on Ubuntu.
      ansible.builtin.apt:
        name: 
         - npm
         - nodejs
        update_cache: true
        state: present
      when: "'Ubuntu' in ansible_facts['distribution']"
    - name: update cache
      yum: 
        update_cache: true
      when: "'CentOS' in ansible_facts['distribution']"  
    - name: Add NodeSource repository 
      yum_repository:
        name: nodesource
        baseurl: https://rpm.nodesource.com/setup_10.x
      when: "'CentOS' in ansible_facts['distribution']"    
    - name: install nodejs on centos 
      ansible.builtin.yum:
        name: nodejs
        update_cache: true
        state: present   
      when: "'CentOS' in ansible_facts['distribution']"     

