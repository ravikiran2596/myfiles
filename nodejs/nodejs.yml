---
- name: install nodejs
  hosts: all
  tasks:
    - name: Install Node package manager and Nodejs on Ubuntu.
      ansible.builtin.apt:
        name: 
         - npm
         - nodejs
        update_cache: true
        state: present
      when: "'Ubuntu' in ansible_facts['distribution']"   
    - name: Add NodeSource repository 
      command:
        update_cache: true
        state: present    
      when: "'CentOS' in ansible_facts['distribution']"    
    - name: install nodejs on centos 
      ansible.builtin.yum:
        name: nodejs
        update_cache: true
        state: present   
      when: "'CentOS' in ansible_facts['distribution']"     

